<!DOCTYPE HTML>
<html>
<head>
  <!--<link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>-->

  <link href='css/bootstrap.css' rel='stylesheet' type='text/css'/>

  <style type="text/css">
    body {
      margin: 10px;
      color: #ddd;
    }

    .configuration {
    }

    .section {
      margin-top: 20px;
    }

    .section:first-child {
      margin-top: 0;
    }

    .title, .title a {
      padding-left: 5px;
      color: yellow;
    }

    .directive {
    }

    .setting, .setting:hover {
      color: #98fb98;
    }

    .value {
      display: inline;
      margin-left: 8px;
      color: #7b68ee;
    }

    .note {
      text-decoration: none;
      border-bottom: 1px dotted #3f23e6;
      cursor: pointer;
    }

    .note-content {
      display: none;
    }

    .section, .directive {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .facet:hover {
      cursor: pointer;
      background-color: #3b3b3b;
    }

    .facet.highlight {
      background-color: #282828;
    }

    .highlight-ws, .highlight-fs, .highlight-ssl, .highlight-redirect, .highlight-monitoring {
      background-color: #282828;
      box-shadow: 0 0 10px #282828;
    }

    .configuration {
      padding-bottom: 30px;
      border-bottom: 1px solid #555;
    }

    .more, .more a {
      margin-top: 5px;
      color: #777;
    }

  </style>

  <script src='js/jquery.js'></script>
  <script src='js/bootstrap.js'></script>
</head>
<body>
<div class='configuration'>
<h1>Interactive HAProxy Configuration</h1>
<div class='row'>
  <div class='span7'>
  <ul class='unstyled'>
    <li class='facet' data-facet='ws'>Websockets</li>
    <li class='facet' data-facet='fs'>Flash sockets</li>
    <li class='facet' data-facet='redirect'>Redirect insecure connections</li>
    <li class='facet' data-facet='ssl'>SSL</li>
    <li class='facet' data-facet='monitoring'>Monitoring</li>
  </ul>
</div>

<div class='span14 offset1'>
  <div class='section'>
    <div class='title'><a href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#3'>global</a></div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#3-nbproc'>nbproc</a>

      <div class='value'>1</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#3-maxconn'>maxconn</a>

      <div class='value'>65536</div>
    </div>
  </div>

  <div class='section'>
    <div class='title'>defaults</div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-timeout connect'>timeout connect</a>

      <div class='value'>5s</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-timeout queue'>timeout queue</a>

      <div class='value'>5s</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-timeout server'>timeout server</a>

      <div class='value'>30s</div>
    </div>
    <div class='directive row ws fs'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-timeout tunnel'>timeout tunnel</a>

      <div class='value'>1h</div>
    </div>
  </div>

  <div class='section redirect'>
    <div class='title'>frontend www</div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-bind'>bind</a>

      <div class='value'>0.0.0.0:80</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-mode'>mode</a>

      <div class='value'>http</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-timeout client'>timeout client</a>

      <div class='value'>5s</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-redirect'>redirect</a>

      <div class='value'>prefix <span class='note'>https://example.com</span>
        <div class='note-content'>
          <p>Replace the hostname with yours.</p>

          <p>The incoming path and params will be included in the redirect. For example, http://example.com/thing?id=2 will redirect to https://example.com/thing?id=2.</p>
        </div>
      </div>
    </div>
  </div>

  <div class='section'>
    <div class='title'>frontend wwws</div>
    <div class='directive row ssl'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-bind'>bind</a>

      <div class='value'>0.0.0.0:443 ssl crt <span class='note'>/etc/haproxy/server.pem</span>
        <div class='note-content'>
          <p>Concat your crt, key (password removed), and any other crts in the chain.</p>

          <p>Avoid relative paths unless you're certain of haproxy's working directory.</p>
        </div>
      </div>
    </div>
    <div class='directive row ws fs'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-timeout client'>timeout client</a>

      <div class='value'>1h</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-default_backend'>default_backend</a>

      <div class='value'>www_backend</div>
    </div>
    <br/>

    <div class='directive row ws'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-acl'>acl</a>

      <div class='value'>is_websocket <a href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#7-hdr'>hdr</a>(Upgrade) -i WebSocket</div>
    </div>
    <div class='directive row ws'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-use_backend'>use_backend</a>

      <div class='value'>websocket_backend if is_websocket</div>
    </div>
    <br/>

    <div class='directive row fs'>
      <a class='setting offset1 span5' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-tcp-request inspect-delay'>tcp-request inspect-delay</a>

      <div class='value'>500ms</div>
    </div>
    <div class='directive row fs'>
      <a class='setting offset1 span5' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-tcp-request content'>tcp-request content</a>

      <div class='value'>accept if HTTP</div>
    </div>
    <div class='directive row fs'>
      <a class='setting offset1 span5' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-use_backend'>use_backend</a>

      <div class='value'>flashsocket_backend if !HTTP</div>
    </div>
  </div>

  <div class='section fs'>
    <div class='title'>frontend flash_policy</div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-bind'>bind</a>

      <div class='value'>0.0.0.0:843</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-timeout client'>timeout client</a>

      <div class='value'> 5s</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href=''>default_backend</a>

      <div class='value'>nodejs_flashpolicy</div>
    </div>
  </div>
</div>

<div class='span14 offset1'>
  <div class='section'>
    <div class='title'>backend www_backend</div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-mode'>mode</a>

      <div class='value'>http</div>
    </div>
    <div class='directive row monitoring'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-stats enable'>stats enable</a>
    </div>
    <div class='directive row monitoring'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-stats uri'>stats uri</a>

      <div class='value'>/haproxy</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-option forwardfor'>option forwardfor</a>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-reqadd'>reqadd</a>

      <div class='value'><span class='note'>x-forwarded-proto:\ https</span>
        <div class='note-content'>
          <p>This header will help most web frameworks (express, rails, sinatra) when they generate absolute urls. The generated urls will include the right protocol (i.e. https).</p>
        </div>
      </div>
    </div>
    <br/>

    <div class='directive row'>
      <a class='setting offset1' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-server'>server</a>

      <div class='value'>server1 backend:<span class='note'>3000</span>
        <div class='note-content'>
          <p>This is the default port for node.js apps using express.</p>
        </div>
        weight 1 maxconn 8192 check
      </div>
    </div>
  </div>

  <div class='section ws'>
    <div class='title'>backend websocket_backend</div>
    <div class='directive row'>
      <a class='setting offset1 span4' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-mode'>mode</a>

      <div class='value'>http</div>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span5' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-option forwardfor'>option forwardfor</a>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span5' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-option http-server-close'>option http-server-close</a>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span5' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#option forceclose'>option forceclose</a>
    </div>
    <div class='directive row'>
      <a class='setting offset1 span5' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-no option httpclose'>no option httpclose</a>
    </div>
    <br/>

    <div class='directive row'>
      <a class='setting offset1' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-server'>server</a>

      <div class='value'>server1 backend:<span class='note'>3000</span>
        <div class='note-content'>
          <p>This is the default port for node.js apps using express.</p>
        </div>
        weight 1 maxconn 8192 check
      </div>
    </div>
  </div>

  <div class='section fs'>
    <div class='title'>backend flashsocket_backend</div>
    <div class='directive row'>
      <a class='setting offset1' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-server'>server</a>

      <div class='value'>server1 backend:<span class='note'>3000</span>
        <div class='note-content'>
          <p>This is the default port for node.js apps using express.</p>
        </div>
        weight 1 maxconn 8192 check
      </div>
    </div>
  </div>

  <div class='section fs'>
    <div class='title'>backend nodejs_flashpolicy</div>
    <div class='directive row'>
      <a class='setting offset1' href='http://cbonte.github.com/haproxy-dconv/configuration-1.5.html#4-server'>server</a>

      <div class='value'>server1 backend:<span class='note'>10843</span>
        <div class='note-content'>
          <p>This is the default port socket.io uses for the flash policy.</p>
        </div>
        maxconn 8192 check
      </div>
    </div>
  </div>
</div>
</div>
</div>
<p class="more">Read more at <a href="http://blog.carbonfive.com/">The Carbon Emitter</a>.</p>

<script>
  $(document).ready(function () {
    $('.facet[data-facet]').on('click',
        function () {
          $(this).toggleClass('highlight');
          $('.' + $(this).data('facet')).toggleClass('highlight-' + $(this).data('facet'), $(this).hasClass('highlight'));
        });

    $('.note').popover({
      html: true,
      trigger: 'hover',
      title: function () {
        return $(this).html();
      },
      content: function () {
        return $(this).siblings('.note-content').html();
      }
    });
  });
</script>
</body>
</html>
